# ═══════════════════════════════════════════════════════════════════════════
# SINGULARITY MESH - Environment Configuration Template
# ═══════════════════════════════════════════════════════════════════════════
# Copy this file to .env and configure your deployment
# ═══════════════════════════════════════════════════════════════════════════

# ───────────────────────────────────────────────────────────────────────────
# REPOSITORY PATHS (Sibling Directory Structure)
# ───────────────────────────────────────────────────────────────────────────
# These should point to your cloned repositories relative to infinity-orchestrator
# Example structure:
#   parent-dir/
#   ├── infinity-orchestrator/
#   ├── infinity-core/
#   ├── infinity-vision/
#   ├── infinity-factory/
#   ├── infinity-knowledge/
#   └── infinity-products/

CORE_REPO_PATH=../infinity-core
VISION_REPO_PATH=../infinity-vision
FACTORY_REPO_PATH=../infinity-factory
KNOWLEDGE_REPO_PATH=../infinity-knowledge
PRODUCTS_REPO_PATH=../infinity-products

# ───────────────────────────────────────────────────────────────────────────
# REPOSITORY URLS (For Fresh Clone Mode)
# ───────────────────────────────────────────────────────────────────────────
CORE_REPO_URL=https://github.com/Infinity-X-One-Systems/infinity-core.git
VISION_REPO_URL=https://github.com/Infinity-X-One-Systems/infinity-vision.git
FACTORY_REPO_URL=https://github.com/Infinity-X-One-Systems/infinity-factory.git
KNOWLEDGE_REPO_URL=https://github.com/Infinity-X-One-Systems/infinity-knowledge.git
PRODUCTS_REPO_URL=https://github.com/Infinity-X-One-Systems/infinity-products.git

# ───────────────────────────────────────────────────────────────────────────
# REPOSITORY BRANCHES
# ───────────────────────────────────────────────────────────────────────────
CORE_BRANCH=main
VISION_BRANCH=main
FACTORY_BRANCH=main
KNOWLEDGE_BRANCH=main
PRODUCTS_BRANCH=main

# ───────────────────────────────────────────────────────────────────────────
# SERVICE PORTS
# ───────────────────────────────────────────────────────────────────────────
REDIS_PORT=6379
CHROMA_PORT=8000
BROWSERLESS_PORT=3000

# ───────────────────────────────────────────────────────────────────────────
# PYTHON VERSION
# ───────────────────────────────────────────────────────────────────────────
PYTHON_VERSION=3.11

# ───────────────────────────────────────────────────────────────────────────
# COMPONENT VERSIONS
# ───────────────────────────────────────────────────────────────────────────
CHROMA_VERSION=0.4.22

# ───────────────────────────────────────────────────────────────────────────
# AGENT MODES
# ───────────────────────────────────────────────────────────────────────────
CORE_AGENT_MODE=autonomous
VISION_MODE=shadow
FACTORY_MODE=continuous

# ───────────────────────────────────────────────────────────────────────────
# LOGGING
# ───────────────────────────────────────────────────────────────────────────
LOG_LEVEL=INFO

# ───────────────────────────────────────────────────────────────────────────
# BUILD SETTINGS
# ───────────────────────────────────────────────────────────────────────────
BUILD_PARALLEL=true

# ───────────────────────────────────────────────────────────────────────────
# GITHUB APP CREDENTIALS (Required — no long-lived PATs per TAP P-002)
# ───────────────────────────────────────────────────────────────────────────
# The infinity-orchestrator GitHub App provides authenticated access to all
# org repositories.  See config/github-app-manifest.json for the full
# permission manifest and SETUP.md for registration instructions.
GITHUB_APP_ID=
GITHUB_APP_PRIVATE_KEY=
# Optional: pre-known installation ID (skips discovery API call)
GITHUB_APP_INSTALLATION_ID=  # optional; if omitted, the bootstrap script auto-discovers it via the GitHub App installations API

# ───────────────────────────────────────────────────────────────────────────
# AI CONNECTORS
# ───────────────────────────────────────────────────────────────────────────
# OpenAI / ChatGPT — used by autonomous invention engine and Genesis agents.
# Docs: .infinity/connectors/openai-connector.json
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini

# Groq — ultra-fast cloud LLM inference (Llama 3.3, Mixtral).
# Docs: .infinity/connectors/groq-connector.json
GROQ_API_KEY=
GROQ_MODEL=llama-3.3-70b-versatile

# Google Gemini — multimodal AI (text, code, images, embeddings).
# Docs: .infinity/connectors/gemini-connector.json
GEMINI_API_KEY=
GEMINI_MODEL=gemini-2.0-flash

# Ollama — local open-source LLM runtime (no API key required).
# Docs: .infinity/connectors/ollama-connector.json
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2
OLLAMA_EMBED_MODEL=nomic-embed-text

# Open WebUI — local LLM gateway UI (running on port 8090).
# Generate API key in Open WebUI Settings → Account → API Keys.
# Docs: .infinity/connectors/openwebui-connector.json
OPENWEBUI_API_KEY=
OPENWEBUI_BASE_URL=http://localhost:8090

# LLM backend selection for BaseAgent.complete():
#   auto    — tries Ollama → Groq → Gemini → OpenAI in order
#   ollama  — always use local Ollama
#   groq    — always use Groq
#   gemini  — always use Gemini
#   openai  — always use OpenAI
INFINITY_LLM_BACKEND=auto

# Vector store embedding backend:
#   tfidf   — pure Python TF-IDF (default, zero deps)
#   openai  — text-embedding-3-small (requires OPENAI_API_KEY)
#   ollama  — nomic-embed-text via Ollama (requires OLLAMA_BASE_URL)
INFINITY_EMBED_BACKEND=tfidf

# ───────────────────────────────────────────────────────────────────────────
# CLOUDFLARE CONNECTOR
# ───────────────────────────────────────────────────────────────────────────
# Minimum required scopes: zone:dns:edit, workers:edit, pages:edit, r2:edit,
# account-settings:read. Add zero-trust:edit for Access/Tunnel management.
# Docs: .infinity/connectors/cloudflare-connector.json
CLOUDFLARE_API_TOKEN=
CLOUDFLARE_ACCOUNT_ID=
CLOUDFLARE_ZONE_ID=

# ───────────────────────────────────────────────────────────────────────────
# VS CODE / CODESPACES CONNECTOR
# ───────────────────────────────────────────────────────────────────────────
# Optional — only needed for VS Code Remote Tunnel access to runner.
# Docs: .infinity/connectors/vscode-connector.json
# VSCODE_TUNNEL_TOKEN=

# ───────────────────────────────────────────────────────────────────────────
# COPILOT EXTENSION (GitHub Copilot Mobile integration)
# ───────────────────────────────────────────────────────────────────────────
# The @infinity-orchestrator Copilot Extension uses ECDSA P-256 (ES256) for
# inbound webhook signature verification — no shared secret is required.
# GitHub's current public keys are fetched on demand from:
#   https://api.github.com/meta/public_keys/copilot_api
# Docs: .infinity/runbooks/copilot-mobile.md
# COPILOT_EXTENSION_WEBHOOK_RECEIVER_URL=https://orchestrator.infinity-x-one.systems/copilot/events

# ═══════════════════════════════════════════════════════════════════════════
# END OF CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════
